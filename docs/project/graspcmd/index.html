<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academia 4.3.1">
  <meta name="generator" content="Hugo 0.59.0" />

  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Command line version of GRASP.&lt;br&gt;&lt;br&gt;[Download bnkit.JAR file](project/graspcmd/archive/bnkit.jar)">

  
  <link rel="alternate" hreflang="en-us" href="http://bodenlab.github.io/GRASP-suite/project/graspcmd/">

  


  

  
  
  
  <meta name="theme-color" content="#fc6f5c">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Open+Sans|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/GRASP-suite/css/academia.min.bc0bb88bdd81325546c60a72b4a6b9e5.css">

  

  
  
  

  

  <link rel="manifest" href="/GRASP-suite/site.webmanifest">
  <link rel="icon" type="image/png" href="/GRASP-suite/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/GRASP-suite/img/icon-192.png">

  <link rel="canonical" href="http://bodenlab.github.io/GRASP-suite/project/graspcmd/">

  
  
  
  
    
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="GRASP-suite">
  <meta property="og:url" content="http://bodenlab.github.io/GRASP-suite/project/graspcmd/">
  <meta property="og:title" content="GRASP-cmd | GRASP-suite">
  <meta property="og:description" content="Command line version of GRASP.&lt;br&gt;&lt;br&gt;[Download bnkit.JAR file](project/graspcmd/archive/bnkit.jar)"><meta property="og:image" content="http://bodenlab.github.io/GRASP-suite/project/graspcmd/featured.jpg">
  <meta property="twitter:image" content="http://bodenlab.github.io/GRASP-suite/project/graspcmd/featured.jpg"><meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2019-11-27T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2019-11-27T00:00:00&#43;00:00">
  

  


  





  <title>GRASP-cmd | GRASP-suite</title>

</head>


<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/GRASP-suite/">GRASP-suite</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation"><span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/GRASP-suite/#hero"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/GRASP-suite/#projects"><span>Tools</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/GRASP-suite/#posts"><span>Tutorials</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/GRASP-suite/#featured"><span>Publications</span></a>
        </li>

        
        

      

        

        

        

        

      </ul>

    </div>
  </div>
</nav>


  <article class="article article-project py-5" itemscope itemtype="http://schema.org/Article">

  













<div class="container split-header">
  <div class="row justify-content-center">
    <div class="col-lg-8">
        <img class="img-fluid w-100" src="/GRASP-suite/project/graspcmd/featured_hu0c1a2d9c22d1eca3fe25c42b1142cce5_149194_680x500_fill_q90_lanczos_smart1.jpg" itemprop="image" alt="">
        
    </div>
    <div class="col-lg-8">
      <h1 itemprop="name">GRASP-cmd</h1>

      

      



<meta content="2019-11-27 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2019-11-27 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>Nov 27, 2019</time>
  </span>
  

  

  

  
  

  
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=http://bodenlab.github.io/GRASP-suite/project/graspcmd/&amp;text=GRASP-cmd" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=http://bodenlab.github.io/GRASP-suite/project/graspcmd/&amp;t=GRASP-cmd" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=GRASP-cmd&amp;body=http://bodenlab.github.io/GRASP-suite/project/graspcmd/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=http://bodenlab.github.io/GRASP-suite/project/graspcmd/&amp;title=GRASP-cmd" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=GRASP-cmd%20http://bodenlab.github.io/GRASP-suite/project/graspcmd/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=http://bodenlab.github.io/GRASP-suite/project/graspcmd/&amp;title=GRASP-cmd" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

      














    </div>
    
    </div>
  </div>
</div>

  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      

<h2 id="grasp-command-line-interface">GRASP command-line interface</h2>

<p>Users who would like to automate ASR, there is now a limited-feature, command-line version of GRASP. It is implemented in <a href="https://github.com/bodenlab/bnkit" target="_blank">bnkit</a> (because that&rsquo;s where all the essential code resides) as a class <code>reconstruction.GraspCmd</code>.</p>

<h3 id="graspcmd-what-can-it-do">GraspCmd: What can it do?</h3>

<p>GraspCmd accepts an alignment (FASTA or Clustal formats) and phylogenetic tree (Newick format) with perfectly concordant labels, to infer ancestor sequences by joint or marginal reconstruction by maximum likelihood. In the process, the program also infers the most parsimonious insertion and deletion events which are internally represented via partial-order graphs; it also identifies the <em>most supported</em> path of sequence inclusions at each ancestor.</p>

<p>This command line version of the full-fledged web service has currently no function to save the (potentially more complex) partial-order graph, but the most supported path always identifies a sequence. The program saves all ancestor sequences (in the case of joint reconstruction, again as FASTA or Clustal) or one sequence (in the case of marginal reconstrution; optionally with amino acid distributions as a TSV file). It can also re-save the tree with assigned ancestor labels.</p>

<h3 id="graspcmd-how-do-i-make-it-work-on-my-computer">GraspCmd: How do I make it work on my computer?</h3>

<p>First, you will need Java version 8 or newer. Any operating system with Java should work, including Mac OS, MS Windows and Linux.</p>

<p>Then, you have a choice: you can clone/download <a href="https://github.com/bodenlab/bnkit" target="_blank">bnkit</a> in its entirety. You may need JUnit 5 testing to get everything working; this is only required if you want to run software tests, say if you are a developer.</p>

<p>Alternatively, just download the pre-compiled <a href="archive/bnkit.jar" target="_blank">bnkit JAR file</a>.</p>

<h3 id="graspcmd-how-do-i-run-it">GraspCmd: How do I run it?</h3>

<p>Optionally, we suggest that you save the JAR file somewhere where everyone on your system can read it, e.g. <code>/Users/mikael/GRASP-suite/archive/bnkit.jar</code>. Then, you create a script <a href="bin/grasp" target="_blank"><code>grasp</code></a> to run it, which you save where other applications are kept on your system, e.g. <code>/Users/mikael/GRASP-suite/bin/</code>.</p>

<p>Once you have the JAR file, type</p>

<pre><code class="language-console">  java -jar bnkit.jar -help
</code></pre>

<p>or if you are running the JAR file through the script above</p>

<pre><code class="language-console">  grasp -help
</code></pre>

<p>This will print out the arguments that specifies your input data and options.</p>

<pre><code class="language-console">Usage: GraspCmd 
	[-aln &lt;alignment-file&gt; -nwk &lt;tree-file&gt; -out &lt;output-file&gt;]
	{-model &lt;JTT(default)|Dayhoff|LG|WAG&gt;}
	{-thr &lt;n-threads&gt;}
	{-joint (default) | -marg &lt;branchpoint-id&gt;} 
	{-gap}
	{-savetree &lt;tree-file&gt;}
	{-format &lt;FASTA(default)|CLUSTAL|DISTRIB&gt;}
	{-verbose}{-help}
where 
	alignment-file is a multiple-sequence alignment on FASTA or CLUSTAL format
	tree-file is a phylogenetic tree on Newick format
	output-file will be populated by inferred ancestor or ancestors
	Inference is either joint (default) or marginal (marginal requires a branch-point to be nominated)
	&quot;-gap&quot; means that the gap-character is included in the resulting output (default for CLUSTAL format)
	&quot;-savetree&quot; re-saves the tree on Newick with ancestor names
	The output file is written on the specified format.
	-verbose will print out information about steps undertaken, and the time it took to finish.
Notes: 
	Greater number of threads may improve processing time, but implies greater memory requirement (default is 1).
	Evolutionary models include Jones-Taylor-Thornton (default), Dayhoff-Schwartz-Orcutt, Le-Gasquel and Whelan-Goldman.
	~ This is version 1027.2019 ~
</code></pre>

<p>A typical command may look like this</p>

<pre><code>grasp -aln 500_2112_dhad_18032019.aln -nwk r_500_2112_dhad_18032019.nwk -out recon_0500.aln -verbose -gap -thr 5
</code></pre>

<h3 id="what-else">What else?</h3>

<p>Running the command-line version is typically a quicker affair, at least for smaller reconstructions, but it requires decent hardware. A reconstruction of less than 1,000 sequences should take less than 10 minutes.</p>

<p>You can probably run a reconstruction with 10,000 sequences on a server, but how &ldquo;gappy&rdquo; the alignment is will also play a part in deciding this. If the alignment is reasonably clean, a powerful, modern laptop with at least 16GB of memory, can do this in under a day. If the alignment covers a diverse family, you will probably need a lot more memory. We recommend you set the Java heap size to 60GB RAM, which you can using the option -Xmx60000m.</p>

<p>The rough estimates above assume you use multiple threads; we recommend 5 or so on decent hardware (-thr 5).</p>

    </div>

    

<div class="article-tags">
  
  <a class="badge badge-light" href="/GRASP-suite/tags/inference/">Inference</a>
  
</div>


    








  





  
  
  
    
  
  
  <div class="media author-card" itemscope itemtype="http://schema.org/Person">
    

    <div class="media-body">
      <h5 class="card-title" itemprop="name"><a href="http://bodenlab.github.io/GRASP-suite/"></a></h5>
      
      
      <ul class="network-icon" aria-hidden="true">
        
      </ul>
    </div>
  </div>




    
    

    
    
    

    
    
    
    </div>

    
    
    
    </div>
  </div>
</article>



      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
      

      
      
    

    
    
      <script async defer src="//maps.googleapis.com/maps/api/js?key=AIzaSyBu5nZKbeK-WHQ70oqOWo-_4VmwOwKP9YQ"></script>
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
      
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    

    
    

    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/GRASP-suite/js/academia.min.281fa180ccfa1769ea3c7dd430814861.js"></script>

    






  
  <div class="container">
    
  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
